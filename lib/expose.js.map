{"version":3,"file":"expose.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;ACVa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,SAAS,GAAG,eAAe,GAAG,eAAe,GAAG,cAAc,GAAG,sBAAsB,GAAG,iBAAiB,GAAG,2BAA2B,GAAG,YAAY,GAAG,aAAa;AACxK,mBAAO,CAAC,wDAAY;AACpB;AACA,aAAa;AACb;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,QAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,4BAA4B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,YAAY,mBAAmB;AAC/B;AACA;AACA;AACA,YAAY,mBAAmB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA,iBAAiB,oEAAoE,YAAY,oBAAoB;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,EAAE,GAAG,YAAY;AAC9C,wBAAwB;AACxB,gDAAgD,oBAAoB;AACpE,0BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;;;;;;;;;ACzRa;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D;;;;;;UCNA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;;;;;ACN8D;AAEvD,MAAM,oBAAoB,GAE7B,EAAE,CAAC;AAEP,MAAM,yBAAyB,GAAG,CAChC,SAAc,EACd,aAAqB,EACrB,WAAgB,EAAE,EAClB,EAAE;IACF,CAAC,CAAC,6BAA6B,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QACpD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","sources":["webpack://agnostic/webpack/universalModuleDefinition","webpack://agnostic/./node_modules/nano-jsx/lib/core.js","webpack://agnostic/./node_modules/nano-jsx/lib/types.js","webpack://agnostic/webpack/bootstrap","webpack://agnostic/webpack/runtime/define property getters","webpack://agnostic/webpack/runtime/hasOwnProperty shorthand","webpack://agnostic/webpack/runtime/make namespace object","webpack://agnostic/./src/expose.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, () => {\nreturn ","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.h = exports._render = exports.hydrate = exports.render = exports.appendChildren = exports.strToHash = exports.removeAllChildNodes = exports.tick = exports.isSSR = void 0;\r\nrequire(\"./types.js\");\r\nconst isSSR = () => typeof _nano !== 'undefined' && _nano.isSSR === true;\r\nexports.isSSR = isSSR;\r\n/** Creates a new Microtask using Promise() */\r\nexports.tick = Promise.prototype.then.bind(Promise.resolve());\r\nconst removeAllChildNodes = (parent) => {\r\n    while (parent.firstChild) {\r\n        parent.removeChild(parent.firstChild);\r\n    }\r\n};\r\nexports.removeAllChildNodes = removeAllChildNodes;\r\n// https://stackoverflow.com/a/7616484/12656855\r\nconst strToHash = (s) => {\r\n    let hash = 0;\r\n    for (let i = 0; i < s.length; i++) {\r\n        const chr = s.charCodeAt(i);\r\n        hash = (hash << 5) - hash + chr;\r\n        hash |= 0; // Convert to 32bit integer\r\n    }\r\n    return Math.abs(hash).toString(32);\r\n};\r\nexports.strToHash = strToHash;\r\nconst appendChildren = (element, children, escape = true) => {\r\n    // if the child is an html element\r\n    if (!Array.isArray(children)) {\r\n        (0, exports.appendChildren)(element, [children], escape);\r\n        return;\r\n    }\r\n    // htmlCollection to array\r\n    if (typeof children === 'object')\r\n        children = Array.prototype.slice.call(children);\r\n    children.forEach(child => {\r\n        // if child is an array of children, append them instead\r\n        if (Array.isArray(child))\r\n            (0, exports.appendChildren)(element, child, escape);\r\n        else {\r\n            // render the component\r\n            const c = (0, exports._render)(child);\r\n            if (typeof c !== 'undefined') {\r\n                // if c is an array of children, append them instead\r\n                if (Array.isArray(c))\r\n                    (0, exports.appendChildren)(element, c, escape);\r\n                // apply the component to parent element\r\n                else {\r\n                    if ((0, exports.isSSR)() && !escape)\r\n                        element.appendChild(c.nodeType == null ? c.toString() : c);\r\n                    else\r\n                        element.appendChild(c.nodeType == null ? document.createTextNode(c.toString()) : c);\r\n                }\r\n            }\r\n        }\r\n    });\r\n};\r\nexports.appendChildren = appendChildren;\r\n/**\r\n * A simple component for rendering SVGs\r\n */\r\nconst SVG = (props) => {\r\n    const child = props.children[0];\r\n    const attrs = child.attributes;\r\n    if ((0, exports.isSSR)())\r\n        return child;\r\n    const svg = hNS('svg');\r\n    for (let i = attrs.length - 1; i >= 0; i--) {\r\n        svg.setAttribute(attrs[i].name, attrs[i].value);\r\n    }\r\n    svg.innerHTML = child.innerHTML;\r\n    return svg;\r\n};\r\n/** Returns the populated parent if available else  one child or an array of children */\r\nconst render = (component, parent = null, removeChildNodes = true) => {\r\n    let el = (0, exports._render)(component);\r\n    if (Array.isArray(el)) {\r\n        el = el.map(e => (0, exports._render)(e));\r\n        if (el.length === 1)\r\n            el = el[0];\r\n    }\r\n    if (parent) {\r\n        if (removeChildNodes)\r\n            (0, exports.removeAllChildNodes)(parent);\r\n        // if parent and child are the same, we replace the parent instead of appending to it\r\n        if (el && parent.id && parent.id === el.id && parent.parentElement) {\r\n            parent.parentElement.replaceChild(el, parent);\r\n        }\r\n        else {\r\n            // append element(s) to the parent\r\n            if (Array.isArray(el))\r\n                el.forEach((e) => {\r\n                    (0, exports.appendChildren)(parent, (0, exports._render)(e));\r\n                    //parent.appendChild(_render(e))\r\n                });\r\n            else\r\n                (0, exports.appendChildren)(parent, (0, exports._render)(el));\r\n        }\r\n        return parent;\r\n    }\r\n    // returning one child or an array of children\r\n    else {\r\n        if ((0, exports.isSSR)() && !Array.isArray(el))\r\n            return [el];\r\n        return el;\r\n    }\r\n};\r\nexports.render = render;\r\nexports.hydrate = exports.render;\r\nconst _render = (comp) => {\r\n    // null, false, undefined\r\n    if (comp === null || comp === false || typeof comp === 'undefined')\r\n        return [];\r\n    // string, number\r\n    if (typeof comp === 'string' || typeof comp === 'number')\r\n        return comp.toString();\r\n    // SVGElement\r\n    if (comp.tagName && comp.tagName.toLowerCase() === 'svg')\r\n        return SVG({ children: [comp] });\r\n    // HTMLElement\r\n    if (comp.tagName)\r\n        return comp;\r\n    // Class Component\r\n    if (comp && comp.component && comp.component.isClass)\r\n        return renderClassComponent(comp);\r\n    // Class Component (Uninitialized)\r\n    if (comp.isClass)\r\n        return renderClassComponent({ component: comp, props: {} });\r\n    // Functional Component\r\n    if (comp.component && typeof comp.component === 'function')\r\n        return renderFunctionalComponent(comp);\r\n    // Array (render each child and return the array) (is probably a fragment)\r\n    if (Array.isArray(comp))\r\n        return comp.map(c => (0, exports._render)(c)).flat();\r\n    // function\r\n    if (typeof comp === 'function' && !comp.isClass)\r\n        return (0, exports._render)(comp());\r\n    // if component is a HTMLElement (rare case)\r\n    if (comp.component && comp.component.tagName && typeof comp.component.tagName === 'string')\r\n        return (0, exports._render)(comp.component);\r\n    // (rare case)\r\n    if (Array.isArray(comp.component))\r\n        return (0, exports._render)(comp.component);\r\n    // (rare case)\r\n    if (comp.component)\r\n        return (0, exports._render)(comp.component);\r\n    // object\r\n    if (typeof comp === 'object')\r\n        return [];\r\n    console.warn('Something unexpected happened with:', comp);\r\n};\r\nexports._render = _render;\r\nconst renderFunctionalComponent = (fncComp) => {\r\n    const { component, props } = fncComp;\r\n    return (0, exports._render)(component(props));\r\n};\r\nconst renderClassComponent = (classComp) => {\r\n    const { component, props } = classComp;\r\n    // calc hash\r\n    const hash = (0, exports.strToHash)(component.toString());\r\n    // make hash accessible in constructor, without passing it to it\r\n    component.prototype._getHash = () => hash;\r\n    const Component = new component(props);\r\n    if (!(0, exports.isSSR)())\r\n        Component.willMount();\r\n    let el = Component.render();\r\n    el = (0, exports._render)(el);\r\n    Component.elements = el;\r\n    // pass the component instance as ref\r\n    if (props && props.ref)\r\n        props.ref(Component);\r\n    if (!(0, exports.isSSR)())\r\n        (0, exports.tick)(() => {\r\n            Component._didMount();\r\n        });\r\n    return el;\r\n};\r\nconst hNS = (tag) => document.createElementNS('http://www.w3.org/2000/svg', tag);\r\n// https://stackoverflow.com/a/42405694/12656855\r\nconst h = (tagNameOrComponent, props = {}, ...children) => {\r\n    // if children is passed as props, merge with ...children\r\n    if (props && props.children) {\r\n        if (Array.isArray(children)) {\r\n            if (Array.isArray(props.children))\r\n                children = [...props.children, ...children];\r\n            else\r\n                children.push(props.children);\r\n        }\r\n        else {\r\n            if (Array.isArray(props.children))\r\n                children = props.children;\r\n            else\r\n                children = [props.children];\r\n        }\r\n    }\r\n    // render WebComponent in SSR\r\n    if ((0, exports.isSSR)() && _nano.ssrTricks.isWebComponent(tagNameOrComponent)) {\r\n        const element = _nano.ssrTricks.renderWebComponent(tagNameOrComponent, props, children, exports._render);\r\n        if (element === null)\r\n            return `ERROR: \"<${tagNameOrComponent} />\"`;\r\n        else\r\n            return element;\r\n    }\r\n    // if tagNameOrComponent is a component\r\n    if (typeof tagNameOrComponent !== 'string')\r\n        return { component: tagNameOrComponent, props: Object.assign(Object.assign({}, props), { children: children }) };\r\n    // custom message if document is not defined in SSR\r\n    try {\r\n        if ((0, exports.isSSR)() && typeof tagNameOrComponent === 'string' && !document)\r\n            throw new Error('document is not defined');\r\n    }\r\n    catch (err) {\r\n        console.log('ERROR:', err.message, '\\n > Please read: https://github.com/nanojsx/nano/issues/106');\r\n    }\r\n    let ref;\r\n    const element = tagNameOrComponent === 'svg'\r\n        ? hNS('svg')\r\n        : document.createElement(tagNameOrComponent);\r\n    // check if the element includes the event (for example 'oninput')\r\n    const isEvent = (el, p) => {\r\n        // check if the event begins with 'on'\r\n        if (0 !== p.indexOf('on'))\r\n            return false;\r\n        // we return true if SSR, since otherwise it will get rendered\r\n        if (el._ssr)\r\n            return true;\r\n        // check if the event is present in the element as object (null) or as function\r\n        return typeof el[p] === 'object' || typeof el[p] === 'function';\r\n    };\r\n    for (const p in props) {\r\n        // https://stackoverflow.com/a/45205645/12656855\r\n        // style object to style string\r\n        if (p === 'style' && typeof props[p] === 'object') {\r\n            const styles = Object.keys(props[p])\r\n                .map(k => `${k}:${props[p][k]}`)\r\n                .join(';')\r\n                .replace(/[A-Z]/g, match => `-${match.toLowerCase()}`);\r\n            props[p] = `${styles};`;\r\n        }\r\n        // handel ref\r\n        if (p === 'ref')\r\n            ref = props[p];\r\n        // handle events\r\n        else if (isEvent(element, p.toLowerCase()))\r\n            element.addEventListener(p.toLowerCase().substring(2), (e) => props[p](e));\r\n        // dangerouslySetInnerHTML\r\n        else if (p === 'dangerouslySetInnerHTML' && props[p].__html) {\r\n            if (!(0, exports.isSSR)()) {\r\n                const fragment = document.createElement('fragment');\r\n                fragment.innerHTML = props[p].__html;\r\n                element.appendChild(fragment);\r\n            }\r\n            else {\r\n                element.innerHTML = props[p].__html;\r\n            }\r\n        }\r\n        // modern dangerouslySetInnerHTML\r\n        else if (p === 'innerHTML' && props[p].__dangerousHtml) {\r\n            if (!(0, exports.isSSR)()) {\r\n                const fragment = document.createElement('fragment');\r\n                fragment.innerHTML = props[p].__dangerousHtml;\r\n                element.appendChild(fragment);\r\n            }\r\n            else {\r\n                element.innerHTML = props[p].__dangerousHtml;\r\n            }\r\n        }\r\n        // className\r\n        else if (/className/i.test(p))\r\n            console.warn('You can use \"class\" instead of \"className\".');\r\n        // setAttribute\r\n        else if (typeof props[p] !== 'undefined')\r\n            element.setAttribute(p, props[p]);\r\n    }\r\n    // these tags should not be escaped by default (in ssr)\r\n    const escape = !['noscript', 'script', 'style'].includes(tagNameOrComponent);\r\n    (0, exports.appendChildren)(element, children, escape);\r\n    if (ref)\r\n        ref(element);\r\n    return element;\r\n};\r\nexports.h = h;\r\n//# sourceMappingURL=core.js.map","\"use strict\";\r\n// fixes an issue in std@0.80.0 (deno)\r\n// interface ReadableStream<R> {\r\n//   getIterator(): any\r\n// }\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=types.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { h, isSSR, render, _render } from 'nano-jsx/lib/core';\n\nexport const WC_REGISTERED_STYLES: {\n  [tagName: string]: string\n} = {};\n\nconst defineAsCustomElementsSSR = (\n  component: any, \n  componentName: string, \n  _options: any = {}\n) => {\n  (!/^[a-zA-Z0-9]+-[a-zA-Z0-9]+$/.test(componentName)) ?\n    console.log(`Error: WebComponent name \"${componentName}\" is invalid.`)\n    : _nano.customElements.set(componentName, component);\n}\n\nexport const defineAsCustomElements: (\n  component: any,\n  componentName: string,\n  shadow?: ShadowRootInit\n) => void = function (component, componentName, shadow) {\n  if (isSSR()) {\n    defineAsCustomElementsSSR(component, componentName);\n    \n    return;\n  }\n\n  customElements.define(componentName, class extends HTMLElement {\n    nanoComponentRef: any;\n    $root: ShadowRoot|HTMLElement;    \n\n    constructor() {\n      super();\n\n      this.addStaticStyles(component.styles).catch(console.error);\n      this.$root = this.root();\n\n      const el = this.buildEl(\n        _render({\n          component,\n          props: {\n            ref: (r: any) => (this.nanoComponentRef = r),\n            children: Array.from(this.childNodes).map(c => render(c)),\n            ...(this.getInitialProps() || {})\n          }\n        })\n      );\n      \n      this.appendEl(el);\n    }\n\n    static get observedAttributes() {\n      return component.attrs;\n    }\n\n    private root() {\n      if (shadow) {\n        this.attachShadow(shadow);\n        return this.shadowRoot as ShadowRoot;\n      } else {\n        return this;\n      }\n    }\n\n    private getInitialProps() {\n      return (component.attrs || []).reduce((acc: any, attr: string) => {\n        if (this.hasAttribute(attr)) {\n          acc[attr] = this.getAttribute(attr);\n        }\n\n        return acc;\n      }, {});\n    }\n\n    private buildEl(contents: any) {\n      // because nano-jsx update need parentElement, we need \n      // to wrap the element in a div when using shadow mode\n      return h(!!this.shadowRoot ? 'div' : 'template', null, contents);\n    }\n\n    private appendEl(el: any) {\n      if (!!this.shadowRoot) {\n        el.dataset.wcRoot = true;\n        this.$root.append(el);\n      } else {\n        this.$root.append(...el.childNodes);\n      }\n    }\n\n    attributeChangedCallback(name: string, _: any, newValue: any) {   \n      this.nanoComponentRef.props[name] = newValue;\n      this.nanoComponentRef.update();\n    }\n\n    private async addStaticStyles(styles: '*.scss'[]) {\n      try {\n        if (typeof window === 'undefined') {\n          return false;\n        }\n        \n        if ((styles && styles.length) && (this.shadowRoot || !WC_REGISTERED_STYLES[this.tagName])) {\n          const styleRoot = this.shadowRoot ? this.$root : window.document ? (window.document?.head || window.document?.body) : this;\n          const style: string = (styles && styles.map((s: '*.scss') => s.toString()).join('') || '').trim();\n\n          if (style) {\n            const styleElement = Object.assign(document.createElement('style'), { \n              textContent: style \n            });\n\n            styleElement.dataset.target = this.tagName.toLowerCase();\n            styleRoot?.append(styleElement);\n    \n            if (!this.shadowRoot) {\n              WC_REGISTERED_STYLES[this.tagName] = style;          \n            }\n          }\n        }\n\n        return Promise.resolve(true);\n      } catch(error) {\n        return Promise.reject(error);\n      }\n    }    \n  })\n}"],"names":[],"sourceRoot":""}